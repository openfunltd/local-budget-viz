<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="./assets/lib/bootstrap/main/dist/css/bootstrap.min.css"></head><body><div class="d-flex flex-column g-2"><div class="my-4 px-4 w-100"><div class="mx-auto w-100 border p-4 rounded" ld="bar" style="height:500px"></div></div><div class="my-4 px-4 w-100"><div class="mx-auto w-100 border p-4 rounded" ld="scatter" style="height:500px"></div></div><div class="my-4 px-4 w-100"><div class="mx-auto w-100 border p-4 rounded" ld="treemap" style="height:500px"></div></div></div><script type="text/javascript" src="./assets/custom/bundle.min.js" defer></script><script type="text/javascript" src="./assets/lib/ldview/main/index.min.js" defer></script><script type="module">var view;view=new ldview({root:document.body});ld$.fetch("https://budget.openfun.app/api/counties",{method:"GET"},{type:"json"}).then(function(i){var a;i=i["歲出"];console.log(i);a=function(i){var e,a,n,t,r;e=Array.from(new Set(i.map(function(e){return e.county})));a=new Set;n=e.map(function(n){var r,e,t;r=i.filter(function(e){return e.county===n});e=Array.from(new Set(r.map(function(e){return e["政事別"]})));e.map(function(e){return a.add(e)});t=Object.fromEntries(e.map(function(n){var e;e=r.filter(function(e){return e["政事別"]===n&&e.year===114}).reduce(function(e,n){return e+n["預算案"]},0);return[n,e]}));return import$({county:n},t)});t=n.filter(function(e){return e.county==="臺北市"})[0];n=n.filter(function(e){return e.county!=="中央"&&e["民政支出"]!==0});a=Array.from(a);n.map(function(e){});a.sort(function(e,n){var r;r=[t[e],t[n]],e=r[0],n=r[1];if(e<n){return 1}else if(e>n){return-1}else{return 0}});r={name:{key:"county"},size:Array.from(a).splice(0,10).map(function(e){return{key:e}})};return{raw:n,binding:r}};makechart.bar({root:view.get("bar")}).then(function(e){var n,r,t;n=a(i),r=n.raw,t=n.binding;e.on(["select"],function(e){return console.log(e)});e.setRaw({raw:r,binding:t});return e.config({brush:{enabled:false},percent:false,type:"bar",dancing:false,yaxis:{baseline:{show:false},caption:{show:false},tick:{inner:0},label:{padding:5}},xaxis:{baseline:{show:false},caption:{show:false},label:{format:"d"},tick:{boundaryOffset:false}},sort:{dir:"asc",dimension:"size",enabled:true}})});makechart.scatter({root:view.get("scatter")}).then(function(e){e.init();e.parse();e.bind();e.resize();return e.render()});return makechart.treemap({root:view.get("treemap")}).then(function(e){e.init();e.parse();e.bind();e.resize();return e.render()})});function import$(e,n){var r={}.hasOwnProperty;for(var t in n)if(r.call(n,t))e[t]=n[t];return e}</script></body></html>