// Generated by LiveScript 1.6.0
var parseCountiesData;
parseCountiesData = function(data){
  var counties, alltypes, raw, refRow, binding;
  counties = Array.from(new Set(data.map(function(it){
    return it.county;
  })));
  alltypes = new Set();
  raw = counties.map(function(county){
    var list, types, value;
    list = data.filter(function(it){
      return it.county === county;
    });
    types = Array.from(new Set(list.map(function(it){
      return it['政事別'];
    })));
    types.map(function(type){
      return alltypes.add(type);
    });
    value = Object.fromEntries(types.map(function(type){
      var ret;
      ret = list.filter(function(it){
        return it['政事別'] === type && it.year === 114;
      }).reduce(function(a, b){
        return a + b["預算案"];
      }, 0);
      return [type, ret];
    }));
    return import$({
      county: county
    }, value);
  });
  refRow = raw.filter(function(it){
    return it.county === '臺北市';
  })[0];
  raw = raw.filter(function(it){
    return it.county !== '中央' && it["民政支出"] !== 0;
  });
  alltypes = Array.from(alltypes);
  raw.map(function(row){});
  alltypes.sort(function(a, b){
    var ref$;
    ref$ = [refRow[a], refRow[b]], a = ref$[0], b = ref$[1];
    if (a < b) {
      return 1;
    } else if (a > b) {
      return -1;
    } else {
      return 0;
    }
  });
  binding = {
    name: {
      key: 'county'
    },
    size: Array.from(alltypes).splice(0, 10).map(function(key){
      return {
        key: key
      };
    })
  };
  return {
    raw: raw,
    binding: binding
  };
};
function import$(obj, src){
  var own = {}.hasOwnProperty;
  for (var key in src) if (own.call(src, key)) obj[key] = src[key];
  return obj;
}
